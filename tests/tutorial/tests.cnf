# Title: 
 Script for running ABINIT for the tutorials
# Before running RunTests.pl with this file, read README in this directory.
#
# Copyright (C) 2003-2008 ABINIT group (LSi)
# This file is distributed under the terms of the
# GNU General Public License, see ~abinit/COPYING
# or http://www.gnu.org/copyleft/gpl.txt .
# For the initials of contributors, see ~abinit/doc/developers/contributors.txt .
#
# for all the following tests, use unix-style file paths
# they will be converted by function transpath if necessary
# file paths may contain a perl variable (e.g. $PSPS)
#
#   The following lines describe the tests to be run. The general syntax of 
# these lines is:	[testID | end] [command | program] parameters.
#
#   The first word is the test identification. All consecutive lines that begin
# with the same word will be executed in that order. "testID" can be 'end' to
# signal the normal end of a tests sequence: multiple 'end's are allowed.
#   The second word specifies an ABINIT module or system command to be run. The
# following system commands are available: copy, erase
# The following keywords refer to ABINIT programs:
# 	abinis | seq	exercise the sequential version of abinis
#	aim		exercise the atom-in-molecule Bader analysis
#	ana | anaddb	exercise anaddb
#	band2eps	exercise band2eps
#	cut3d		exercise cut3d
#	conducti	exercise conducti
#	lwf		exercise lwf
#       macroave        exercise macroave
#	mrg | mrgddb	exercise mrgddb
#	newsp		exercise newsp
#
#   parameters for copy and erase are file or directory names
#
#   parameters for mrgddb must comply to the following format:
#	[fn1] 'short description' (fn2 fn3 ... fnLast)
#   fn2 ... fnLast can reside in the Test directory as normal or g-zipped files
# they will be copied, and unzipped if necessary, to the working directory
# before the test and the copy will be deleted after
#
#   parameters for the other programs are either file paths derived from the
# subroutines 'doseqtest', 'newsptest', ... in the old Run.pl scripts, or
# options to tailor the flow of results analysis and other operations before
# or after the tests;
# format for file paths is: fnI=path
# format for pseudo-potential file paths is: pspI=path
# format for the GEO file is: GEO=path
# format for the DS3_DOS_AT000x file name is: DS3AT=path
# format for options is: opt=option
# option can be either a standard option of the fldiff script (-easy , -medium , -ridiculous),
# options to tailor the analysis of the results after test completion:
#	-nofld	don't run fldiff
#	-logout  log to .out file and apply diff/fldiff to it
#	-DOS	apply diff/fldiff to the o_DOS file
#	-DS2	apply diff/fldiff to the o_DS2_DOS file
#	+xml	also apply diff/fldiff to the CML.xml file
# or the following options to modify the flow of operations during the test:
#     -keepfn4
# default options to call fldiff are: -ignore -ignoreP 
#
#   Default file names for the test with Id NNN (1 to 3 characters string):
# 1) mrg/mrgddb
# fn1 = tNNN.ddb.out
# 2) abinis/seq
# fn1 = ../tNNN.in
# fn2 = tNNN.out
# fn3 =	tNNNi
# fn4 = tNNNo
# fn5 = tNNN
# fn6-fn9,psp1-psp4 = none
# 3) newsp
# fn1-fn2 = none
# fn3 = tNNNo_WFK
# 4) ana/anaddb
# fn1 = ../tNNN.in
# fn2 = tNNN.out
# fn3 = tNNN.ddb.in
#   fn3 can reside in the Test directory as a normal or g-zipped file
# it will be copied, and unzipped if necessary, to the working directory before
# the test and the copy will be deleted after
# fn4 = tNNN.md
# 5) cut3d
# fn1 = ../tNNN.in
# fn2 = tNNN.out
# 6) aim
# fn1 = ../tNNN.in
# fn2 = tNNNi_DEN
# fn3 = tNNN
# fn4-fn5,psp1-psp2 = none
# 7) conducti
# fn1 = ../tNNN.in
# fn2 = tNNN.out
# fn3 =	tNNN
# 8) lwf
# fn1 = ../tNNN.in
# fn2 = ../tNNN.moldyn.in
# fn3 = tNNN.out
# fn4 = tNNN.wandata
# 9) band2eps
# fn1 = ../tNNN.in
# fn2 = tNNN.out.eps
# fn3 = ../tNNN.in.freq
# fn4 = ../tNNN.in.displ
# 10) macroave
# fn1 = ../tNNN.in
# fn2 = tNNN_DEN.MAV
# fn3 = tNNN_DEN.PAV
# fn4 = tNNN
11 seq psp1=01h.pspgth
12 seq psp1=01h.pspgth
13 seq psp1=01h.pspgth
14 seq psp1=01h.pspgth
15 seq psp1=01h.pspgth
21 seq psp1=01h.pspgth
# In some cases, change the default tolerance from 1.0d-10 to 1.0d-8 or 1.0d-5
22 seq psp1=01h.pspgth opt=-medium
23 seq psp1=01h.pspgth opt=-medium
24 seq psp1=01h.pspgth
25 seq psp1=01h.pspgth opt=-medium
31 seq psp1=14si.pspnc
32 seq psp1=14si.pspnc
33 seq psp1=14si.pspnc
34 seq psp1=14si.pspnc opt=-medium
35 seq psp1=14si.pspnc
41 seq psp1=13al.981214.fhi
42 seq psp1=13al.981214.fhi opt=-easy
43 seq psp1=13al.981214.fhi opt=-easy
44 seq psp1=13al.981214.fhi
45 seq psp1=13al.981214.fhi opt=-easy
46 seq psp1=13al.981214.fhi opt=-easy
47 seq psp1=13al.981214.fhi opt=-easy
48 seq psp1=13al.981214.fhi
gw1_1 seq psp1=14si.pspnc
gw1_2 seq psp1=14si.pspnc
# Case gw1_3-gw1_9: copy files at the right place, then, must keep the copied files
gw1_3 erase tgw1_3o_*
gw1_3 copy tgw1_2o_DS2_KSS tgw1_3o_DS1_KSS 
gw1_3 copy tgw1_2o_DS3_SCR tgw1_3o_DS1_SCR 
gw1_3 seq psp1=14si.pspnc opt=-keepfn4
gw1_4 erase tgw1_4o_*
gw1_4 copy tgw1_2o_DS2_KSS tgw1_4o_DS1_KSS
gw1_4 copy tgw1_2o_DS3_SCR tgw1_4o_DS1_SCR
gw1_4 seq psp1=14si.pspnc opt=-keepfn4
gw1_5 erase tgw1_5o_*
gw1_5 copy tgw1_2o_DS2_KSS tgw1_5o_DS1_KSS
gw1_5 copy tgw1_2o_DS3_SCR tgw1_5o_DS1_SCR
gw1_5 seq psp1=14si.pspnc opt=-keepfn4
gw1_6 erase tgw1_6o_*
gw1_6 copy tgw1_2o_DS2_KSS tgw1_6o_DS1_KSS
gw1_6 copy tgw1_2o_DS3_SCR tgw1_6o_DS1_SCR
gw1_6 seq psp1=14si.pspnc opt=-keepfn4
gw1_7 erase tgw1_7o_*
gw1_7 copy tgw1_2o_DS2_KSS tgw1_7o_DS1_KSS
gw1_7 copy tgw1_2o_DS3_SCR tgw1_7o_DS1_SCR
gw1_7 seq psp1=14si.pspnc opt=-keepfn4
gw1_8 erase tgw1_8o_*
gw1_8 copy tgw1_2o_DS2_KSS tgw1_8o_DS1_KSS
gw1_8 copy tgw1_2o_DS3_SCR tgw1_8o_DS1_SCR
gw1_8 seq psp1=14si.pspnc opt=-keepfn4
gw1_9 erase tgw1_9o_*
gw1_9 copy tgw1_2o_DS2_KSS tgw1_9o_DS1_KSS
gw1_9 copy tgw1_2o_DS3_SCR tgw1_9o_DS1_SCR
gw1_9 seq psp1=14si.pspnc opt=-keepfn4
gw2_1 seq psp1=13al.981214.fhi
gw2_2 erase tgw2_2o_*
gw2_2 copy tgw2_1o_KSS tgw2_2i_KSS
gw2_2 seq psp1=13al.981214.fhi opt=-keepfn4
gw2_3 erase tgw2_3o_*
gw2_3 copy tgw2_1o_KSS tgw2_3i_KSS
gw2_3 copy tgw2_2o_SCR tgw2_3i_SCR
gw2_3 seq psp1=13al.981214.fhi opt=-keepfn4
gw2_4 erase tgw2_4o_*
gw2_4 copy tgw2_1o_KSS tgw2_4i_KSS
gw2_4 copy tgw2_2o_SCR tgw2_4i_SCR
gw2_4 seq psp1=13al.981214.fhi opt=-keepfn4
paral_1 seq psp1=HGH/82pb.4.hgh
paral_2 seq psp1=HGH/26fe.8.hgh
paral_3 seq psp1=HGH/79au.11.hgh
paw1_1 seq psp1=6c.pspnc
paw1_2 seq psp1=6c.pspnc
paw1_3 seq psp1=6c.lda.atompaw opt=-easy
paw1_4 seq psp1=6c.lda.atompaw opt=-easy
paw1_5 seq psp1=6c.lda.atompaw opt=-easy
spin_1 seq psp1=26fe.pspnc
spin_2 seq psp1=26fe.pspnc
spin_3 seq psp1=26fe.pspnc
spin_5 seq psp1=73ta.hghsc
tddft_1 seq psp1=7n.psphgh
make report
